---
title: 你不知道的webpack
date: 2019-02-23
tags: webpack
categories: 前端工程
---

# webpack的核心定义
一个模块打包器(能识别ES Moudule和CommonJS规范和其他如css等格式的文件)

# 提高构建和打包效率
  * 让node和webpack版本最新

# package.json文件
```javascript
 {
   "private": true, // 私有项目, 不会被发布到npm线上仓库
   "main": "index.js", // 被外部引用的js文件
 }
```

# npm script
```bash
 $ npm init -y # 用默认配置初始项目
 $ npm info webpack # 查看包的历史版本号
 $ npx webpack -v # 使用nodemodules里的包
```

# entry config
```javascript
 entry: './src/index.js'
 // 其实是如下的简写
 entry: {
   main: './src/index.js'
 }
```

# mode config
```javascript
 mode: 'development' // 代码不会被压缩, 默认为 production, 代码会被压缩
```

# loader 非js模块的打包
```javascript
module: {
  rules: [
    {
      test: /\.(jpg|png|gif)$/,
      use: {
        // 会把图片转成base64, 如果不配置limit会直接放到js里
        loader: 'url-loader',
        options: {
          // placeholder 占位符语法
          name: '[name]_[hash].[ext]',
          outputPath: 'images/',
          // limit: 1024 // file-loader没有这个配置项
        }
      }
    },
    {
      test: /\.css$/,
      use: [
        'style-loader', // 将css内容挂载到head
        'css-loader', // 分析css文件的引用关系
      ]
    },
    {
      test: /\.scss$/,
      // use 顺序, 从下到上, 从右到左
      use: [
        'style-loader',
        'css-loader',
        // https://webpack.js.org/loaders/sass-loader
        // npm install sass-loader node-sass webpack --save-dev
        'sass-loader',
        // https://webpack.js.org/loaders/postcss-loader
        'postcss-loader' // 自动添加厂商前缀等
      ]
    }
  ]
}
```

# postcss
```javascript
// postcss.config.js
module.exports = {
  plugins: [
    require('autoprefixer')
  ]
}
```
