---
title: webpack4的一些操作
date: 2018-11-30 08:40:26
tags: webpack
categories: 前端工程
---

# 开发时引入本地js库
```javascript
// webpack配置
devServer: {
    contentBase: path.join(__dirname, 'to-your-libs')
    // ...
```

# 生产时打包本地js库
<!-- more -->

```bash
$ npm i -D script-loader
```


```javasrcipt
// webpack配置
// module: {
    // rules: [
      // ...
        { 
          test: /\.exec\.js$/,
          use: [ 'script-loader' ]
        }
      // ...

// 在你的src文件中引入库
require('path-to-your-libs/lib.exec.js')
```

# 代码分割
```javascript
// webpack配置
output: {
  path: path.resolve('./output'),
  filename: '[name].[hash].bundle.js',
  chunkFilename: '[name].[chunkhash].chunk.js'
},
optimization: {
  splitChunks: {
    chunks: 'all', // 默认只作用于异步模块，为`all`时对所有模块生效,`initial`对同步模块有效
    minSize: 1, // 合并前模块文件的体积
    minChunks: 1, //最少被引用次数
    maxAsyncRequests: 5, // 按需加载时候最大的并行请求数
    maxInitialRequests: 3, // 一个入口最大的并行请求数
    automaticNameDelimiter: '~', // 自动命名连接符
    cacheGroups: {
      vendors: {
        test: /[\\/]node_modules[\\/]/,
        minChunks:1, // 最少被引用次数
        priority: -10 // 优先级更高
      },
      commons: {
        test: /[\\/]src[\\/]lib[\\/]/,
        minChunks: 1, // 最少被引用次数
        priority: -20
      }
    }
  }
},
```
